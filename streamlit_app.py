import streamlit as st
import pandas as pd
from datetime import date

# --- 1. åŸºæœ¬è¨­å®š ---
STATIONS = {
    "ãƒˆãƒ©ãƒ³ã‚¹è»½äº•æ²¢": 8,
    "è»½äº•æ²¢æ¸…é¢¨è˜": 10,
    "ã‚†ã†ã›ã‚“è»½äº•æ²¢": 9,
    "ã‚ªãƒªãƒƒã‚¯ã‚¹è»½äº•æ²¢": 14
}
SECTIONS = ["ãƒ•ãƒ­ãƒ³ãƒˆ", "å¨æˆ¿", "ã‚µãƒ¼ãƒ“ã‚¹", "å®¢å®¤ãƒ¡ãƒ³ãƒ†"]

st.set_page_config(page_title="è»½äº•æ²¢4æ–½è¨­ãƒ»çµŒå–¶é›†ç´„ã‚·ã‚¹ãƒ†ãƒ ", layout="wide")

# --- 2. ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆãƒªãƒ¼ãƒ€ãƒ¼ç”¨ãƒ»æ”¯é…äººç”¨åˆ‡ã‚Šæ›¿ãˆï¼‰ ---
menu = st.sidebar.radio("ãƒ¡ãƒ‹ãƒ¥ãƒ¼é¸æŠ", ["ã€æ”¯é…äººã€‘æ—¥æ¬¡å…¥åŠ›", "ã€ãƒªãƒ¼ãƒ€ãƒ¼ã€‘å…¨ä½“ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰"])

# --- 3. æ”¯é…äººå…¥åŠ›ç”»é¢ ---
if menu == "ã€æ”¯é…äººã€‘æ—¥æ¬¡å…¥åŠ›":
    st.title("ğŸ“± æ—¥æ¬¡å–¶æ¥­å®Ÿç¸¾ãƒ»ã‚·ãƒ•ãƒˆå ±å‘Š")
    
    with st.form("daily_report"):
        col1, col2 = st.columns(2)
        with col1:
            target_date = st.date_input("å ±å‘Šæ—¥", date.today())
            facility = st.selectbox("æ–½è¨­å", list(STATIONS.keys()))
            rooms = st.number_input("å®Ÿç¨¼åƒå®¢å®¤æ•°", min_value=0, max_value=STATIONS[facility])
        with col2:
            adults = st.number_input("å®¿æ³Šäººæ•°ï¼ˆå¤§äººï¼‰", min_value=0)
            children = st.number_input("å®¿æ³Šäººæ•°ï¼ˆå­ä¾›ï¼‰", min_value=0)
            meals = st.number_input("å¤•é£Ÿæä¾›æ•°", min_value=0)

        st.divider()
        st.subheader("ğŸ´ é£²é£ŸåŸä¾¡ç®¡ç†")
        cost = st.number_input("æœ¬æ—¥ã®é£Ÿæä»•å…¥ã‚Œé¡ (å††)", min_value=0, step=1000)
        
        st.divider()
        st.subheader("ğŸ¤ ãƒ˜ãƒ«ãƒ—è¦è«‹ãƒ»ã‚·ãƒ•ãƒˆçŠ¶æ³")
        help_status = st.select_slider(
            "ã‚µãƒ¼ãƒ“ã‚¹ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®çŠ¶æ³",
            options=["ä½™è£•ã‚ã‚Š", "é©æ­£", "ãƒ˜ãƒ«ãƒ—ãŒå¿…è¦"],
            value="é©æ­£"
        )
        memo = st.text_area("ç‰¹è¨˜äº‹é …ï¼ˆæ¬ å‹¤ã‚„æ©Ÿæãƒˆãƒ©ãƒ–ãƒ«ãªã©ï¼‰")
        
        submitted = st.form_submit_button("å®Ÿç¸¾ã‚’é€ä¿¡ã™ã‚‹")
        if submitted:
            st.success(f"{facility}ã® {target_date} å®Ÿç¸¾ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚")

# --- 4. ãƒªãƒ¼ãƒ€ãƒ¼ç”¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ ---
elif menu == "ã€ãƒªãƒ¼ãƒ€ãƒ¼ã€‘å…¨ä½“ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰":
    st.title("ğŸ“Š 4æ–½è¨­çµŒå–¶ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰")
    
    # ç°¡æ˜“çš„ãªã‚µãƒãƒªãƒ¼è¡¨ç¤ºï¼ˆæœ¬æ¥ã¯DBã‹ã‚‰å–å¾—ï¼‰
    col1, col2, col3, col4 = st.columns(4)
    col1.metric("å…¨ä½“ç¨¼åƒç‡", "85%", "+5%")
    col2.metric("ç·å®¿æ³Šäººæ•°", "124å", "å‰æ—¥æ¯” +12")
    col3.metric("æ¨å®šå¹³å‡å˜ä¾¡", "24,500å††", "-200å††")
    col4.metric("åŸä¾¡ã‚¢ãƒ©ãƒ¼ãƒˆ", "1æ–½è¨­", "è¦ãƒã‚§ãƒƒã‚¯")

    st.divider()
    
    # ã‚·ãƒ•ãƒˆéä¸è¶³ãƒ’ãƒ¼ãƒˆãƒãƒƒãƒ—ï¼ˆã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰
    st.subheader("ğŸ“ æ–½è¨­é–“ãƒ˜ãƒ«ãƒ—èª¿æ•´çŠ¶æ³")
    shift_data = pd.DataFrame({
        "æ–½è¨­å": STATIONS.keys(),
        "ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ³": ["é©æ­£", "âš ï¸ãƒ˜ãƒ«ãƒ—å¿…è¦", "âœ…ä½™è£•ã‚ã‚Š", "é©æ­£"],
        "ä¸è¶³äººæ•°": [0, 2, -1, 0]
    })
    st.table(shift_data)

    st.info("ğŸ’¡ è»½äº•æ²¢æ¸…é¢¨è˜ã§2åä¸è¶³ã—ã¦ã„ã¾ã™ã€‚ã‚†ã†ã›ã‚“è»½äº•æ²¢ã«ä½™è£•ãŒã‚ã‚‹ãŸã‚ã€LINEã§ã®èª¿æ•´ã‚’æ¨å¥¨ã—ã¾ã™ã€‚")
